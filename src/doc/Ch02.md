# 2.4 여러 함수로 결합하기
- 함수형 디자인의 원칙. 작은 함수를 여러개 합성해 사용하는 것
- 요청을 받고 바로 응답을 반환하는 함수를 작성해 보자
  - (1) HTTP 요청에서 사용자와 목록 이름을 가져온다
  - (2) 목록에 있는 콘텐츠를 가져온다
  - (3) 가져온 콘텐츠를 HTML로 렌더링 한다
  - (4) HTML이 포함된 응답을 반환한다
```text
Request -(1)-> {User, ListName} -(2)-> ToDoList -(3)-> HTML -(4)-> Response
```

## 애로사항
- Rust의 warp로 Filter를 만들 때 map 함수에 클로저를 사용해야 함
- 클로저로 Zettai 구조체의 필드, 구조체에 구현한 함수를 사용하려고 하니 에러남
  ```text
  error[E0373]: closure may outlive the current function, but it borrows self, which is owned by the current function
  --> src/zettai/zettai.rs:82:18
   |
  82 |             .map(|user: String, list_name: String| Self::show_list_page(&self, user, list_name));
  |                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                       ---- self is borrowed here
  |                  |
  |                  may outlive borrowed value self
  |
  note: function requires argument type to outlive 'static
  ```
- 클로저에서 self를 참조하는데 self가 해당 함수가 끝나도 클로저에서 살아있을 수 있기 때문에 발생하는 에러
- self를 계속 사용하기 어려워서 html page를 만드는 함수들을 따로 분리해서 해결함
